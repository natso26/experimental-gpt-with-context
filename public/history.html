<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Experimental GPT with Context - History</title>
    <style>
        body {
            font-family: monospace;
            font-size: 16px;
            margin: 16px 0 0 12px;
            color: #262626;
        }

        .text-box {
            font-family: monospace;
            font-size: 15px;
            width: 85%;
            border: 1px solid #bbb;
            border-radius: 8px;
            padding: 10px;
        }

        .number-input {
            font-family: monospace;
            font-size: 15px;
            text-align: right;
            border: 1px solid #bbb;
            border-radius: 8px;
            padding: 4px;
            width: 3em;
        }

        .buttons-panel {
            display: flex;
            flex-direction: row;
            width: calc(85% + 20px);
            justify-content: space-between;
            align-items: center;
        }

        .button {
            font-family: monospace;
            font-size: 14px;
            width: 110px;
            border: none;
            border-radius: 18px;
            padding: 8px;
            margin: 4px 0 0 0;
            background-color: aliceblue;
        }

        .button-recolor {
            background-color: orange;
        }
    </style>
</head>
<body>
<label for="chat-id">Chat ID</label>
<div>
    <textarea class="text-box" id="chat-id" rows="1"></textarea>
</div>
<div class="buttons-panel">
    <div>
        <label for="offset">Offset</label>
        <input class="number-input" id="offset" min="0" step="1" type="number">
        <label for="limit">Limit</label>
        <input class="number-input" id="limit" min="1" step="1" type="number">
        <button class="button" id="submit">Submit</button>
    </div>
    <button class="button button-recolor" id="chat">Chat</button>
</div>

<script>
    const chatIdBox = document.getElementById('chat-id');
    const offsetInput = document.getElementById('offset');
    const limitInput = document.getElementById('limit');
    const submitButton = document.getElementById('submit');
    const chatButton = document.getElementById('chat');
    const updateUrl = () => {
        const chatId = chatIdBox.value.trim();
        const offset = offsetInput.value.trim();
        const limit = limitInput.value.trim();
        const url = new URL(window.location.href);
        url.searchParams.set('chatId', chatId);
        url.searchParams.set('offset', offset);
        url.searchParams.set('limit', limit);
        window.history.pushState({}, '', url);
    };
    chatIdBox.value = new URL(window.location.href).searchParams.get('chatId') || '';
    offsetInput.value = new URL(window.location.href).searchParams.get('offset') || '0';
    limitInput.value = new URL(window.location.href).searchParams.get('limit') || '25';
    updateUrl();
    chatIdBox.addEventListener('change', updateUrl);
    offsetInput.addEventListener('change', updateUrl);
    limitInput.addEventListener('change', updateUrl);
    chatButton.addEventListener('click', () => {
        const chatId = chatIdBox.value.trim();
        window.location.href = `/?chatId=${chatId}`;
    });
</script>
</body>
</html>